{% extends "base.html" %}
{% block title %}Importar clientes — Rota Assessoria{% endblock %}
{% block subtitle %}Importação em massa de clientes{% endblock %}
{% block content %}

<div class="max-w-3xl mx-auto">
  <div class="bg-white rounded-2xl shadow p-6 md:p-8">
    <div class="flex items-start justify-between gap-4 mb-6">
      <div>
        <h2 class="text-xl font-semibold">Importar clientes</h2>
        <p class="text-sm text-gray-600 mt-1">
          Baixe um dos modelos, preencha os dados e envie o arquivo para importar os clientes em massa.
        </p>
      </div>      
    </div>

    <!-- Versão mobile dos botões -->
    <div class="md:hidden flex items-center gap-2 mb-6">
      <a href="{{ url_for('clientes.baixar_template_clientes_xlsx') }}"
         class="flex-1 inline-flex items-center justify-center px-3 py-2 rounded-md border text-sm hover:bg-gray-50">
        📘 Template (.xlsx)
      </a>
    </div>

    <form method="post" enctype="multipart/form-data" class="space-y-6">
      <div>
        <label for="arquivo" class="block text-sm font-medium text-gray-800 mb-1">Arquivo para importação</label>
        <input
          id="arquivo" name="arquivo" type="file" accept=".csv,.xlsx" required
          class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-300" />
        <p class="mt-2 text-xs text-gray-500">
          Aceita <strong>.csv</strong> (vírgula ou ponto-e-vírgula) e <strong>.xlsx</strong>. Mantenha os cabeçalhos do template.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
        <div class="md:col-span-2 text-xs text-gray-600 bg-gray-50 rounded-lg p-3 border">
          <p class="font-medium mb-2">Dicas rápidas</p>
          <ul class="list-disc pl-5 space-y-1">
            <li><code>modelo</code> aceita: <em>TRADICIONAL</em>, <em>ASSET</em>, <em>FEE_BASED</em>, <em>FEE_BASED_SEM_RV</em>.</li>
            <li><code>repasse</code> aceita 35 ou 50.</li>
            <li>Valores numéricos: “1.234,56” ou “1234.56”.</li>
            <li>Se informar <code>codigo_xp</code> ou <code>codigo_mb</code>, o sistema faz <em>upsert</em> por usuário.</li>
          </ul>
        </div>
        <div class="flex md:flex-col gap-2">         
          <a href="{{ url_for('clientes.baixar_template_clientes_xlsx') }}"
             class="flex-1 inline-flex items-center justify-center px-3 py-2 rounded-lg border text-sm hover:bg-gray-50">
            📘 Baixar XLSX
          </a>
        </div>
      </div>

      <div class="flex items-center gap-3">
        <button type="submit"
                class="px-4 py-2 rounded-lg bg-gray-900 text-white text-sm font-medium hover:bg-gray-800">
          🚀 Importar
        </button>
        <a href="{{ url_for('clientes.index') }}"
           class="px-4 py-2 rounded-lg border text-sm font-medium hover:bg-gray-50">
          ← Voltar
        </a>
      </div>
    </form>
  </div>
</div>

{% endblock %}
